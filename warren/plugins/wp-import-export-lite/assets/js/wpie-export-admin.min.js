"use strict";function wpieSetToolTip(){jQuery.isFunction(jQuery.fn.tipso)&&jQuery(".wpie_data_tipso").length&&jQuery(".wpie_data_tipso").tipso({useTitle:!1,background:"rgba(0,0,0,0.8)",color:"#ffffff",size:"small",tooltipHover:!0})}function wpieChangeExport(e){if(!wpieValidateExportExt())return wpieHideLoader(),!1;wpieRefreshExportData(),wpieAddProecess("wpieGetRuleList"),wpieGetRuleList(),"taxonomies"==e?(jQuery(".wpie_total_records_wrapper").hide(),jQuery(".wpie_taxonomies_types_wrapper").slideDown("slow"),jQuery(".wpie_attribute_taxonomies_wrapper").slideUp("slow"),jQuery(".wpie_filter_section_wrapper").slideDown("slow"),wpieRefreshExportFilters(jQuery(".wpie_content_data_rule_fields"),"filter"),wpieRefreshExportFilters(jQuery(".wpie_content_data_field_list"),"export"),wpieRefreshExportFilters(jQuery(".wpie_bulk_fields"),"export"),wpieRefreshExportFields({},!1),wpieAddProecess("wpieExportTemplateList"),wpieExportTemplateList(e,"","")):""!=e&&(jQuery(".wpie_filter_section_wrapper").slideDown("slow"),"product_attributes"==e?(jQuery(".wpie_taxonomies_types_wrapper").slideUp("slow"),jQuery(".wpie_attribute_taxonomies_wrapper").slideDown("slow")):jQuery(".wpie_sub_type_wrapper").slideUp("slow"),wpieAddProecess("wpieExportRecordCount"),wpieAddProecess("wpieExportTemplateList"),wpieAddProecess("wpieSetExportFields"),wpieExportRecordCount(),wpieExportTemplateList(e,"",""),wpieSetExportFields())}function wpieIsValidTime(){var e=wpiePluginSettings.wpiePluginData;if(""!==e){var i=jQuery.parseJSON(e);if(void 0!==i.home&&i.home===wpiePluginSettings.wpieSiteUrl)return!0}return!1}function wpieAddProecess(e){""!==e&&-1===wpiePluginSettings.processes.indexOf(e)&&wpiePluginSettings.processes.push(e),jQuery(".wpie_loader").hasClass("wpie_hidden")&&wpieShowLoader()}function wpieRemoveProecess(e){""!==e&&0!==wpiePluginSettings.processes.length&&-1!==wpiePluginSettings.processes.indexOf(e)&&wpiePluginSettings.processes.splice(wpiePluginSettings.processes.indexOf(e),1),0===wpiePluginSettings.processes.length&&wpieHideLoader()}function wpieGetRuleList(){void 0===wpiePluginSettings.wpieExportData.exportRule?jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"POST",data:"action=wpie_export_get_rule_list",dataType:"json",success:function(e){if("error"==e.status)return wpieSetErrorMsg(e.message),!1;wpiePluginSettings.wpieExportData.exportRule=e.wpie_export_rule,wpieRemoveProecess("wpieGetRuleList")},error:function(e,i){wpieHandleAjaxError(e,i)}}):wpieRemoveProecess("wpieGetRuleList")}function wpieIsData(){var e=wpiePluginSettings.wpiePluginData;if(""!==e){var i=jQuery.parseJSON(e);if(void 0!==i.author&&"vjinfotech"===i.author)return!0}return!1}function wpieAddNewExportRule(e){if(""==jQuery(".wpie_export_type_select").val())return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTypeText),!1;var i=jQuery(".wpie_content_data_rule_fields option:selected").text(),t=jQuery(".wpie_content_data_rule_select option:selected").text(),p=jQuery(".wpie_content_data_rule_fields").val(),r=jQuery(".wpie_content_data_rule_select").val(),a=jQuery(".wpie_content_data_rule_value").val();if(""==r)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectElementText),!1;if(""==p)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportRuleText),!1;void 0===wpiePluginSettings.wpieExportData.filterRuleNumber&&(wpiePluginSettings.wpieExportData.filterRuleNumber=1),void 0===wpiePluginSettings.wpieExportData.filterRule&&(wpiePluginSettings.wpieExportData.filterRule={});var o="wpie_filter_"+wpiePluginSettings.wpieExportData.filterRuleNumber,n="";if(jQuery(".wpie_filter_data_rule").length>0){var l="",s="";"OR"==e?s='checked="checked"':l='checked="checked"',n='<div class="wpie_rule_condition_wrapper wpie_rule_and_condition_wrapper"><input type="radio" id="wpie_content_data_rule_condition_'+o+'_and" name="wpie_content_data_rule_condition_'+o+'" class="wpie_content_data_rule_condition_value wpie_rule_condition_option wpie_radio" '+l+' value="AND"/><label class="wpie_radio_label" for="wpie_content_data_rule_condition_'+o+'_and">'+wpiePluginSettings.wpieLocalizeText.andText+'</label></div><div class="wpie_rule_condition_wrapper"><input type="radio" id="wpie_content_data_rule_condition_'+o+'_or" name="wpie_content_data_rule_condition_'+o+'" class="wpie_content_data_rule_condition_value wpie_radio wpie_rule_condition_option" '+s+' value="OR"/><label class="wpie_radio_label" for="wpie_content_data_rule_condition_'+o+'_or">'+wpiePluginSettings.wpieLocalizeText.orText+"</label></div>",jQuery(".wpie_content_added_data_rule .wpie_filter_data_rule").last().find(".wpie_filter_data_rule_cond_data").html(n)}var _='<tr class="wpie_filter_data_rule wpie_filter_data_rule_'+o+'" wpie_rule_data="'+o+'"><td class="wpie_filter_rule_list wpie_filter_data_rule_text">'+i+'</td><td class="wpie_filter_rule_list wpie_filter_data_rule_cond">'+t+'</td><td class="wpie_filter_rule_list wpie_filter_data_rule_val">" '+a+' "</td><td class="wpie_filter_rule_list wpie_filter_data_rule_cond_data"></td><td class="wpie_filter_rule_list wpie_filter_data_rule_action"><i class="fas fa-trash wpie_trash_general_btn_icon wpie_rule_trash_btn " aria-hidden="true"></i></td></tr>';return wpiePluginSettings.wpieExportData.filterRule[o]={fieldRule:p,fieldCondition:r,fieldRuleValue:a},wpiePluginSettings.wpieExportData.filterRuleNumber++,jQuery(".wpie_content_added_data_rule").append(_),!0}function wpieRefreshExportData(){var e=jQuery(".wpie_export_type_select").val();jQuery(".wpie_total_records_wrapper").hide(),"shop_order"==e?jQuery(".wpie_order_item_row_option_wrapper,.wpie_advance_options_row").slideDown():jQuery(".wpie_order_item_row_option_wrapper,.wpie_advance_options_row").slideUp(),"taxonomies"!=e&&jQuery(".wpie_taxonomies_types_wrapper").slideUp("slow"),jQuery(".wpie_content_added_data_rule").html(""),jQuery(".wpie_field_selection").html(""),jQuery(".wpie_export_file_type").val("").trigger("chosen:updated"),jQuery(".wpie_wpml_lang_all").prop("checked",!0),jQuery(".wpie_csv_field_separator").val(","),jQuery(".wpie_export_file_name").val(""),jQuery(".wpie_records_per_iteration").val("50"),wpieRefreshExportFilters(jQuery(".wpie_content_data_rule_fields"),"filter"),wpieRefreshExportFilters(jQuery(".wpie_content_data_field_list"),"export"),wpieRefreshExportFilters(jQuery(".wpie_bulk_fields"),"export"),wpieRefreshExportRuleFilters("");var i=jQuery(".wpie_taxonomies_types_select").val();"taxonomies"==e&&void 0!==wpiePluginSettings.wpieExportData[e]&&void 0!==wpiePluginSettings.wpieExportData[e][i]&&void 0!==wpiePluginSettings.wpieExportData[e][i].totalRecords?delete wpiePluginSettings.wpieExportData[e][i].totalRecords:"taxonomies"!=e&&void 0!==wpiePluginSettings.wpieExportData[e]&&void 0!==wpiePluginSettings.wpieExportData[e].totalRecords&&delete wpiePluginSettings.wpieExportData[e].totalRecords,wpiePluginSettings.wpieExportData.filterRule={}}function wpieRefreshExportRuleFilters(e){var i='<option value="">'+wpiePluginSettings.wpieLocalizeText.selectExportRuleText+"</option>"+e;jQuery.isFunction(jQuery.fn.chosen)&&jQuery(".wpie_content_data_rule_select").chosen("destroy"),jQuery(".wpie_content_data_rule_select").html(i),jQuery.isFunction(jQuery.fn.chosen)&&jQuery(".wpie_content_data_rule_select").chosen({search_contains:!0})}function wpieSetExportTemplateList(e){var i='<select class="wpie_content_data_select wpie_template_list_select" name="wpie_template_list" >';i+='<option value="">'+wpiePluginSettings.wpieLocalizeText.selectTemplateText+"</option>",""!=e&&jQuery.each(e,function(e,t){i+='<option value="'+t.id+'">'+t.name+"</option>"}),i+="</select>",jQuery(".wpie_template_list_wrapper").html(i),jQuery.isFunction(jQuery.fn.chosen)&&jQuery(".wpie_template_list_select").chosen({search_contains:!0}),wpieRemoveProecess("wpieExportTemplateList")}function wpieExportTemplateList(e,i,t){void 0!==wpiePluginSettings.wpieExportData[e]&&void 0!==wpiePluginSettings.wpieExportData[e].template?wpieSetExportTemplateList(wpiePluginSettings.wpieExportData[e].template):jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"POST",data:"action=wpie_export_get_template_list&content_type="+e+"&query_type="+i+"&query_data="+t,dataType:"json",success:function(i){if("error"==i.status)return wpieSetErrorMsg(i.message),!1;void 0!==wpiePluginSettings.wpieExportData[e]&&null!=wpiePluginSettings.wpieExportData[e]||(wpiePluginSettings.wpieExportData[e]=[]),wpiePluginSettings.wpieExportData[e].template=i.data,wpieSetExportTemplateList(i.data)},error:function(e,i){wpieHandleAjaxError(e,i)}})}function wpieHandleAjaxError(e,i){return wpieSetErrorMsg(0===e.status?wpiePluginSettings.wpieLocalizeText.wpie_ajax_not_connect_error:400==e.status?wpiePluginSettings.wpieLocalizeText.wpie_ajax_400_error:404==e.status?wpiePluginSettings.wpieLocalizeText.wpie_ajax_404_error:500==e.status?wpiePluginSettings.wpieLocalizeText.wpie_ajax_internal_server_error:"parsererror"===i?wpiePluginSettings.wpieLocalizeText.wpie_ajax_jason_parse_error:"timeout"===i?wpiePluginSettings.wpieLocalizeText.wpie_ajax_time_out_error:"abort"===i?wpiePluginSettings.wpieLocalizeText.wpie_ajax_request_aborted_error:wpiePluginSettings.wpieLocalizeText.wpie_ajax_uncaught_error+e.responseText),!1}function wpieSetStrictErrorMsg(e){wpieHideLoader(),jQuery(".wpie_strict_error_content").html(e),jQuery(".wpie_strict_error_model").modal({backdrop:"static",show:!0,keyboard:!1})}function wpieSetErrorMsg(e){wpieHideLoader(),jQuery(".wpie_error_content").html(e),jQuery(".wpie_error_model").modal({backdrop:!0,show:!0})}function wpieSetSuccessMsg(e){jQuery.notify({message:'<i class="far fa-check-circle"></i> '+e},{type:"success",placement:{align:"right",from:"bottom"},animate:{enter:"animated fadeInUp",exit:"animated fadeOutDown"}})}function wpieShowLoader(){jQuery(".wpie_loader").removeClass("wpie_hidden")}function wpieHideLoader(){jQuery(".wpie_loader").addClass("wpie_hidden")}function wpieSetExportFields(){var e=jQuery(".wpie_export_type_select").val(),i=jQuery(".wpie_taxonomies_types_select").val();if(void 0!==wpiePluginSettings.wpieExportData[e]&&null!=wpiePluginSettings.wpieExportData[e]||(wpiePluginSettings.wpieExportData[e]=[]),void 0===wpiePluginSettings.wpieExportData[e][i]&&(wpiePluginSettings.wpieExportData[e][i]={}),"taxonomies"==e&&void 0!==wpiePluginSettings.wpieExportData[e][i]&&void 0!==wpiePluginSettings.wpieExportData[e][i].fields)wpieRefreshExportFilters(jQuery(".wpie_content_data_rule_fields"),"filter"),wpieRefreshExportFilters(jQuery(".wpie_content_data_field_list"),"export"),wpieRefreshExportFilters(jQuery(".wpie_bulk_fields"),"export"),wpieRefreshExportFields(wpiePluginSettings.wpieExportData[e][i].fields,!0);else if("taxonomies"!=e&&void 0!==wpiePluginSettings.wpieExportData[e].fields)wpieRefreshExportFilters(jQuery(".wpie_content_data_rule_fields"),"filter"),wpieRefreshExportFilters(jQuery(".wpie_content_data_field_list"),"export"),wpieRefreshExportFilters(jQuery(".wpie_bulk_fields"),"export"),wpieRefreshExportFields(wpiePluginSettings.wpieExportData[e].fields,!0);else{var t=jQuery(".wpie_export_type_select").val(),p=jQuery(".wpie_attribute_taxonomies_select").val();p=null!=p?p:"",jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"GET",data:"action=wpie_export_field_list&export_type="+t+"&taxonomy_type="+i+"&attribute_taxonomy="+p,dataType:"json",success:function(t){if("error"==t.status)return wpieSetErrorMsg(t.message),!1;"taxonomies"==e?(void 0===wpiePluginSettings.wpieExportData[e][i]&&(wpiePluginSettings.wpieExportData[e][i]={}),wpiePluginSettings.wpieExportData[e][i].fields=t.fields):"taxonomies"!=e&&(wpiePluginSettings.wpieExportData[e].fields=t.fields),wpieRefreshExportFilters(jQuery(".wpie_content_data_rule_fields"),"filter"),wpieRefreshExportFilters(jQuery(".wpie_content_data_field_list"),"export"),wpieRefreshExportFilters(jQuery(".wpie_bulk_fields"),"export"),wpieRefreshExportFields(t.fields,!0)},error:function(e,i){wpieHandleAjaxError(e,i)}})}}function wpieRefreshExportFilters(e,i){var t={},p=jQuery(".wpie_export_type_select").val(),r=jQuery(".wpie_taxonomies_types_select").val();if(void 0!==wpiePluginSettings.wpieExportData[p]&&("taxonomies"==p&&void 0!==wpiePluginSettings.wpieExportData[p][r]&&void 0!==wpiePluginSettings.wpieExportData[p][r].fields?t=wpiePluginSettings.wpieExportData[p][r].fields:"taxonomies"!=p&&void 0!==wpiePluginSettings.wpieExportData[p].fields&&(t=wpiePluginSettings.wpieExportData[p].fields)),"filter"==i)var a='<option value="">'+wpiePluginSettings.wpieLocalizeText.selectElementText+"</option>";else a="";return t&&jQuery.each(t,function(e,t){t&&(a+=wpieExportTypeGenerator(e,t,i))}),jQuery.isFunction(jQuery.fn.chosen)&&e.chosen("destroy"),e.html(a),jQuery.isFunction(jQuery.fn.chosen)&&e.chosen({search_contains:!0}),!1}function wpieExportTypeGenerator(e,i,t){if(void 0===i.data||"filter"==t&&void 0!==i.isFiltered&&0==i.isFiltered||"export"==t&&void 0!==i.isExported&&0==i.isExported)return"";var p="",r="";return p+='<optgroup label="'+i.title+'">',jQuery.each(i.data,function(e,i){"filter"==t&&void 0!==i.isFiltered&&0==i.isFiltered||(r=encodeURIComponent(JSON.stringify(i)),p+='<option value="'+r+'" >'+i.name+"</option>")}),p+="</optgroup>"}function wpieGetExportFields(e){if(""==e)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTypeText),!1;if(void 0!==wpiePluginSettings.wpieExportData[e]&&void 0!==wpiePluginSettings.wpieExportData[e].fields&&void 0===wpiePluginSettings.wpieExportData[e].wpieExportAllFields){void 0===wpiePluginSettings.wpieExportData[e]&&(wpiePluginSettings.wpieExportData[e]={}),void 0===wpiePluginSettings.wpieExportData[e].wpieExportAllFields&&(wpiePluginSettings.wpieExportData[e].wpieExportAllFields={}),void 0===wpiePluginSettings.wpieExportData[e].wpieExportFields&&(wpiePluginSettings.wpieExportData[e].wpieExportFields={}),void 0===wpiePluginSettings.wpieExportData[e].wpieExportDefaultFields&&(wpiePluginSettings.wpieExportData[e].wpieExportDefaultFields={}),void 0===wpiePluginSettings.wpieExportData[e].wpieExportFilterFields&&(wpiePluginSettings.wpieExportData[e].wpieExportFilterFields={});var i=0,t=0,p=wpiePluginSettings.wpieExportData[e].fields;jQuery.each(p,function(p,r){r&&(isFiltered=!0,isExportFields=!0,void 0!==r.isFiltered&&0==r.isFiltered?isFiltered=!1:(wpiePluginSettings.wpieExportData[e].wpieExportFilterFields[t]={},wpiePluginSettings.wpieExportData[e].wpieExportFilterFields[t].data={},wpiePluginSettings.wpieExportData[e].wpieExportFilterFields[t].title=r.title),void 0!==r.isExportFields&&0==r.isExportFields?isExportFields=!1:(wpiePluginSettings.wpieExportData[e].wpieExportFields[t]={},wpiePluginSettings.wpieExportData[e].wpieExportFields[t].data={},wpiePluginSettings.wpieExportData[e].wpieExportFields[t].title=r.title),jQuery.each(r.data,function(p,r){wpiePluginSettings.wpieExportData[e].wpieExportAllFields[i]=r,isFiltered&&(wpiePluginSettings.wpieExportData[e].wpieExportFilterFields[t].data[i]=i),isExportFields&&(wpiePluginSettings.wpieExportData[e].wpieExportFields[t].data[i]=i),void 0!==r.isDefault&&1==r.isDefault&&(wpiePluginSettings.wpieExportData[e].wpieExportDefaultFields[i]=i),i++}),t++)})}return!0}function wpieExportTypeGenerator1(e,i){var t="";return jQuery.each(e,function(e,p){t+='<optgroup label="'+p.title+'">',jQuery.each(p.data,function(e,p){void 0!==wpiePluginSettings.wpieExportData[i].wpieExportAllFields[p]&&(t+='<option value="'+p+'" >'+wpiePluginSettings.wpieExportData[i].wpieExportAllFields[p].name+"</option>")}),t+="</optgroup>"}),t}function wpie_get_random_unique_index(e){var i=Math.floor(1e8*Math.random()+1);return void 0===e||void 0===e[i]?i:wpie_get_random_unique_index(e)}function wpieRefreshExportFields(e,i){var t=wpieGenerateFields(e,i);jQuery(".wpie_field_selection").html(t),jQuery.isFunction(jQuery.fn.wpie_editable)&&jQuery(".wpie_fields_title:not(.wpie_editable_container)").each(function(){jQuery(this).addClass("wpie_editable_container").wpie_editable("click",function(e){})}),jQuery.isFunction(jQuery.fn.sortable)&&(jQuery(".wpie_field_selection").hasClass("ui-sortable")?jQuery(".wpie_field_selection").sortable("refresh"):jQuery(".wpie_field_selection").sortable({placeholder:"wpie_sortable_data_highlight",handle:".wpie_fields_handle",helper:"clone"})),wpieRemoveProecess("wpieSetExportFields")}function wpieGenerateFields(e,i){var t="";return"object"==typeof e&&null!=e&&(void 0===wpiePluginSettings.wpieExportData.wpieFieldData&&(wpiePluginSettings.wpieExportData.wpieFieldData={}),jQuery.each(e,function(e,p){if(!p||void 0===p.data||1==i&&(void 0===p.isDefault||void 0!==p.isDefault&&1!=p.isDefault)||void 0!==p.isExported&&0==p.isExported)return"";var r="";jQuery.each(p.data,function(e,p){(1==i&&void 0!==p.isDefault&&1==p.isDefault||0==i)&&(r=encodeURIComponent(JSON.stringify(p)),t+=wpieGenerateFieldsData(r,r,p.name))})})),t}function wpieGenerateFieldsData(e,i,t){var p='<div class="wpie_fields_wrapper">';return p+='<div class="wpie_fields_inner_wrapper">',p+='<div class="wpie_fields_title_wrapper">',p+='<label class="wpie_fields_title" field_data="'+e+'" old_field_data="'+i+'">'+t+"</label>",p+="</div>",p+='<div class="wpie_fields_options_wrapper">',p+='<div class="wpie_fields_options wpie_fields_settings"><i class="fas fa-wrench" aria-hidden="true"></i></div>',p+='<div class="wpie_fields_options wpie_fields_remove"><i class="fas fa-trash" aria-hidden="true"></i></div>',p+='<div class="wpie_fields_options wpie_fields_handle"><i class="fas fa-arrows-alt" aria-hidden="true"></i></div>',p+="</div>",p+="</div>",p+="</div>"}function wpieExportRecordCount(){var e=jQuery(".wpie_export_frm").serialize(),i=jQuery(".wpie_export_type_select").val();if(""==i)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTypeText),!1;var t=jQuery(".wpie_taxonomies_types_select").val(),p=wpieGetFieldRuleData();jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"POST",data:"action=wpie_export_records_count&"+e+"&wpie_filter_rule="+p,dataType:"json",success:function(e){if("error"==e.status)return wpieSetErrorMsg(e.message),!1;void 0===wpiePluginSettings.wpieExportData[i]&&(wpiePluginSettings.wpieExportData[i]={}),"taxonomies"==i?(void 0===wpiePluginSettings.wpieExportData[i][t]&&(wpiePluginSettings.wpieExportData[i][t]={}),wpiePluginSettings.wpieExportData[i][t].totalRecords=e.totalRecords):wpiePluginSettings.wpieExportData[i].totalRecords=e.totalRecords,jQuery(".wpie_total_records").html(e.totalRecords),jQuery(".wpie_total_records_wrapper").show(),wpieRemoveProecess("wpieExportRecordCount")},error:function(e,i){wpieHandleAjaxError(e,i)}})}function wpieAddAllFields(){var e=jQuery(".wpie_export_type_select").val();if(void 0!==wpiePluginSettings.wpieExportData[e]){var i=jQuery(".wpie_taxonomies_types_select").val();"taxonomies"==e&&void 0!==wpiePluginSettings.wpieExportData[e][i]&&void 0!==wpiePluginSettings.wpieExportData[e][i].fields?wpieRefreshExportFields(wpiePluginSettings.wpieExportData[e][i].fields,!1):"taxonomies"!=e&&void 0!==wpiePluginSettings.wpieExportData[e].fields&&wpieRefreshExportFields(wpiePluginSettings.wpieExportData[e].fields,!1)}}function wpieSaveTemplate(e,i){var t=jQuery(".wpie_export_type_select").val();if(""===t)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTypeText),!1;if(0===e&&""===i)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.enterTemplateNameText),!1;wpieShowLoader();var p="";jQuery(".wpie_field_selection .wpie_fields_title").each(function(e,i){var t=jQuery(this).html(),r=(i=decodeURIComponent(jQuery(this).attr("field_data")),decodeURIComponent(jQuery(this).attr("old_field_data")));p+=t+"|~|"+i+"|~|"+r+"~||~"}),jQuery(".wpie_export_fields_data").val(p);var r=wpieGetFieldRuleData(),a=jQuery(".wpie_export_frm").serialize();jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"POST",data:"action=wpie_export_save_template&template_name="+i+"&template_id="+e+"&wpie_export_condition="+r+"&"+a,dataType:"json",success:function(p){if(wpieHideLoader(),"error"==p.status)return wpieSetErrorMsg(p.message),!1;0===e?void 0!==p.template_id&&(jQuery(".wpie_update_template_btn_wrapper").hide(),jQuery(".wpie_template_list_select").append(new Option(i,p.template_id)).val("").trigger("chosen:updated")):void 0!==wpiePluginSettings.wpieExportData[t]&&"undefined"!=wpiePluginSettings.wpieExportData[t].templateData&&wpiePluginSettings.wpieExportData[t].templateData[e]&&delete wpiePluginSettings.wpieExportData[t].templateData[e],wpieSetSuccessMsg(p.message)},error:function(e,i){wpieHandleAjaxError(e,i)}})}function wpieSetExportTemplate(e){if(void 0!==e.wpie_csv_field_separator&&""!=e.wpie_csv_field_separator?jQuery(".wpie_csv_field_separator").val(e.wpie_csv_field_separator):jQuery(".wpie_csv_field_separator").val(","),void 0!==e.wpie_export_file_name&&""!=e.wpie_export_file_name?jQuery(".wpie_export_file_name").val(e.wpie_export_file_name):jQuery(".wpie_export_file_name").val(""),void 0!==e.wpie_export_file_type&&""!=e.wpie_export_file_type?jQuery(".wpie_export_file_type").val(e.wpie_export_file_type).trigger("chosen:updated"):jQuery(".wpie_export_file_type").val("").trigger("chosen:updated"),void 0!==e.wpie_records_per_iteration&&""!=e.wpie_records_per_iteration?jQuery(".wpie_records_per_iteration").val(e.wpie_records_per_iteration):jQuery(".wpie_records_per_iteration").val(50),void 0!==e.wpie_export_include_bom&&""!=e.wpie_export_include_bom?jQuery(".wpie_export_include_bom").prop("checked",!0):jQuery(".wpie_export_include_bom").prop("checked",!1),void 0!==e.wpie_order_item_sigle_row&&""!=e.wpie_order_item_sigle_row?(jQuery(".wpie_order_item_sigle_row").prop("checked",!0),jQuery(".wpie_order_item_fill_empty_wrapper").slideDown()):(jQuery(".wpie_order_item_sigle_row").prop("checked",!1),jQuery(".wpie_order_item_fill_empty_wrapper").slideUp()),void 0!==e.wpie_order_item_fill_empty&&""!=e.wpie_order_item_fill_empty?jQuery(".wpie_order_item_fill_empty").prop("checked",!0):jQuery(".wpie_order_item_fill_empty").prop("checked",!1),void 0!==e.extra_copy_path&&""!=e.extra_copy_path?jQuery(".extra_copy_path").val(e.extra_copy_path):jQuery(".extra_copy_path").val(""),wpiePluginSettings.wpieExportData.filterRule={},wpiePluginSettings.wpieExportData.filterRuleNumber=1,jQuery(".wpie_content_added_data_rule").html(""),void 0!==e.wpie_export_condition&&""!=e.wpie_export_condition){jQuery(".wpie_content_added_data_rule").html("");var i=e.wpie_export_condition.split("~`|`~");if(void 0!==i[0]){var t="";jQuery.each(i,function(e,i){if(""!=i){var p=i.split("`|~`");jQuery(".wpie_content_data_rule_fields").val(encodeURIComponent(p[0])).trigger("change"),jQuery(".wpie_content_data_rule_select").val(encodeURIComponent(p[1])).trigger("change"),jQuery(".wpie_content_data_rule_value").val(encodeURIComponent(p[2])),wpieAddNewExportRule(t),t=void 0!==p[3]&&"AND"===p[3]?"AND":"OR"}})}jQuery(".wpie_content_data_rule_fields").val("").trigger("chosen:updated"),jQuery(".wpie_content_data_rule_select").val("").trigger("chosen:updated"),jQuery(".wpie_content_data_rule_value").val("")}if(void 0!==e.wpie_wpml_lang&&""!=e.wpie_wpml_lang&&jQuery(".wpie_wpml_lang_"+e.wpie_wpml_lang).prop("checked",!0),void 0!==e.fields_data&&""!=e.fields_data){var p="",r=e.fields_data.split("~||~");jQuery.each(r,function(e,i){var t=i.split("|~|"),r=t[0],a=encodeURIComponent(t[1]),o=encodeURIComponent(t[2]);""!=r&&(p+=wpieGenerateFieldsData(a,o,r))}),jQuery(".wpie_field_selection").html(p),jQuery.isFunction(jQuery.fn.sortable)&&jQuery(".wpie_field_selection").sortable("refresh"),jQuery.isFunction(jQuery.fn.wpie_editable)&&jQuery(".wpie_fields_title:not(.wpie_editable_container)").each(function(){jQuery(this).addClass("wpie_editable_container").wpie_editable("click",function(e){})})}wpieAddProecess("wpieExportRecordCount"),wpieExportRecordCount()}function wpieProcessExport(e){if(!wpieValidateExport())return!1;wpiePluginSettings.wpieExportData.exportStatus="export",wpiePluginSettings.wpieExportData.isPackage=e,wpiePluginSettings.wpieExportData.exportFileType=jQuery(".wpie_export_file_type").val(),wpieGenerateFile()}function wpiePreviewData(){var e=jQuery(".wpie_export_type_select").val(),i=jQuery(".wpie_taxonomies_types_select").val(),t=0;"taxonomies"==e&&""!=i?void 0!==wpiePluginSettings.wpieExportData[e][i]&&(t=wpiePluginSettings.wpieExportData[e][i].totalRecords):t=wpiePluginSettings.wpieExportData[e].totalRecords,wpieGetFieldsData();var p=wpieGetFieldRuleData(),r=jQuery(".wpie_export_frm").serializeArray();wpiePluginSettings.wpieExportData.wpiePreviewTable=jQuery(".wpie_preview").DataTable({processing:!0,serverSide:!0,searching:!1,ordering:!1,ajax:{url:wpiePluginSettings.wpieAjaxURL,type:"POST",cache:!1,data:function(e){delete e.columns,e.action="wpie_export_get_preview_data",e.wpie_filter_rule=p,e.total=t,jQuery.each(r,function(i,t){e[t.name]=t.value})},complete:function(e){}}}),jQuery(".wpie_preview_model").modal("show")}function wpieValidateExport(){var e=jQuery(".wpie_export_type_select").val(),i=jQuery(".wpie_taxonomies_types_select").val();return""==e?(wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTypeText),!1):"taxonomies"==e&&""==i?(wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTaxTypeText),!1):jQuery(".wpie_field_selection .wpie_fields_title").length<1?(wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieExportEmptyColumnText),!1):void 0===wpiePluginSettings.wpieExportData[e]||!("taxonomies"!=e&&void 0!==wpiePluginSettings.wpieExportData[e].totalRecords&&wpiePluginSettings.wpieExportData[e].totalRecords<1||"taxonomies"==e&&void 0!==wpiePluginSettings.wpieExportData[e][i].totalRecords&&wpiePluginSettings.wpieExportData[e][i].totalRecords<1)||(wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieExportEmptyDataText),!1)}function wpieValidateExportExt(){var e=jQuery(".wpie_export_type_select").val(),i=!0,t="";if(!jQuery.isArray(wpiePluginSettings.wpieExtensions)){var p=[];jQuery.isEmptyObject(wpiePluginSettings.wpieExtensions)||jQuery.each(wpiePluginSettings.wpieExtensions,function(e){p.push(e)}),wpiePluginSettings.wpieExtensions=p}return""==e?(t=wpiePluginSettings.wpieLocalizeText.selectExportTypeText,i=!1):void 0!==wpiePluginSettings.isWcActive&&1!=wpiePluginSettings.isWcActive&&-1!==jQuery.inArray(e,["shop_customer","shop_order","shop_coupon","product","product_attributes"])?(t=wpiePluginSettings.wpieLocalizeText.ActivateWc,i=!1):"users"==e?wpiePluginSettings.wpieExtensions.indexOf("wpie_user_export")<0&&(t=wpiePluginSettings.wpieLocalizeText.wpieExportUserExtDisableText,i=!1):"shop_customer"==e?wpiePluginSettings.wpieExtensions.indexOf("wpie_wc_export")<0?(t=wpiePluginSettings.wpieLocalizeText.wpieExportWCExtDisableText,i=!1):wpiePluginSettings.wpieExtensions.indexOf("wpie_user_export")<0&&(t=wpiePluginSettings.wpieLocalizeText.wpieExportUserExtDisableText,i=!1):"shop_order"==e||"shop_coupon"==e||"product"==e?wpiePluginSettings.wpieExtensions.indexOf("wpie_wc_export")<0&&(t=wpiePluginSettings.wpieLocalizeText.wpieExportWCExtDisableText,i=!1):"product_attributes"==e&&wpiePluginSettings.wpieExtensions.indexOf("wpie_product_attribute_export")<0&&(t=wpiePluginSettings.wpieLocalizeText.wpieExportattrExtDisableText,i=!1),0!=i||(jQuery(".wpie_export_type_select").val("").trigger("chosen:updated"),wpieRefreshExportData(),wpieSetErrorMsg(t),!1)}function wpieValidateProcess(){return!1!==wpieIsValidTime()&&!1!==wpieIsData()||(wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieInvalidLicense),!1)}function wpieGenerateFile(){var e=jQuery(".wpie_export_type_select").val();void 0!==wpiePluginSettings.wpieExportData[e]&&null!=wpiePluginSettings.wpieExportData[e]||(wpiePluginSettings.wpieExportData[e]=[]),jQuery(".wpie_export_notice").show(),1==wpiePluginSettings.wpieExportData.isPackage&&wpieAddAllFields(),wpieGetFieldsData();var i=wpieGetFieldRuleData(),t=jQuery(".wpie_export_frm").serialize(),p=0;if("undefined"!=wpiePluginSettings.wpieExportData[e])if("taxonomies"==e){var r=jQuery(".wpie_taxonomies_types_select").val();"undefined"!=wpiePluginSettings.wpieExportData[e][r]&&"undefined"!=wpiePluginSettings.wpieExportData[e][r].totalRecords&&wpiePluginSettings.wpieExportData[e][r].totalRecords>0&&(p=wpiePluginSettings.wpieExportData[e][r].totalRecords)}else"undefined"!=wpiePluginSettings.wpieExportData[e].totalRecords&&wpiePluginSettings.wpieExportData[e].totalRecords>0&&(p=wpiePluginSettings.wpieExportData[e].totalRecords);jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"POST",data:"action=wpie_export_create_data&is_package="+wpiePluginSettings.wpieExportData.isPackage+"&"+t+"&wpie_filter_rule="+i+"&total="+p,dataType:"json",success:function(e){if("error"==e.status)return wpieSetErrorMsg(e.message),!1;0!=e.wpie_export_id&&(wpieResetExportOptions(),jQuery(".wpie_download_exported_file_id").val(e.export_id),wpiePluginSettings.wpieExportData.wpieExportId=e.export_id,delete wpiePluginSettings.wpieExportData.exportProcess,wpieExportAllData())},error:function(e,i){wpieHandleAjaxError(e,i)}})}function wpieResetExportOptions(){jQuery(".wpie_remote_export_wrapper").hide(),jQuery(".wpie_export_process .progress-bar").removeClass("wpie_completed"),jQuery(".progress-bar").css("width","0%").html("0%"),jQuery(".wpie_export_process_header").html(jQuery(".wpie_export_process_header").attr("process_text")),jQuery(".wpie_export_process_per").html("0%"),jQuery(".wpie_export_time_elapsed_value").html("00:00:00"),jQuery(".wpie_export_total_records_value").html("0"),jQuery(".wpie_export_process_btn_wrapper").hide(),jQuery(".wpie_export_process_option_btn_wrapper").show(),jQuery(".wpie_export_popup_wrapper").modal({backdrop:"static",keyboard:!1,show:!0}),clearInterval(wpiePluginSettings.wpieExportData.exportInterval),wpiePluginSettings.wpieExportData.exportIntervalSec=0,wpiePluginSettings.wpieExportData.exportInterval=setInterval(function(){jQuery(".wpie_export_time_elapsed_value").html(wpieElapsedTimeString(wpiePluginSettings.wpieExportData.exportIntervalSec++))},1e3)}function wpiePrettyTimeString(e){return(e<10?"0":"")+e}function wpieElapsedTimeString(e){var i=Math.floor(e/3600);e%=3600;var t=Math.floor(e/60);e%=60;var p=Math.floor(e);return(i=wpiePrettyTimeString(i))+":"+(t=wpiePrettyTimeString(t))+":"+(p=wpiePrettyTimeString(p))}function wpieExportAllData(){var e=jQuery(".wpie_export_type_select").val();if(void 0!==wpiePluginSettings.wpieExportData.exportStatus)if("export"==wpiePluginSettings.wpieExportData.exportStatus)wpiePluginSettings.wpieExportData.exportProcess=jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"GET",data:"action=wpie_export_update_data&export_id="+wpiePluginSettings.wpieExportData.wpieExportId,dataType:"json",success:function(i){if("error"==i.status)return wpieSetErrorMsg(i.message),!1;if(0!=i.wpie_export_id&&"completed"!=i.export_status){var t=i.exported_records,p=0;if(t>0)if("taxonomies"==e){var r=jQuery(".wpie_taxonomies_types_select").val();p=wpiePluginSettings.wpieExportData[e][r].totalRecords>0?parseInt(100*t/wpiePluginSettings.wpieExportData[e][r].totalRecords):100}else p=wpiePluginSettings.wpieExportData[e].totalRecords>0?parseInt(100*t/wpiePluginSettings.wpieExportData[e].totalRecords):100;p=p<100?p:100,jQuery(".progress-bar").css("width",p+"%").html(p+"%"),jQuery(".wpie_export_total_records_value").html(t),wpieExportAllData()}else(1==wpiePluginSettings.wpieExportData.isPackage||""!=wpiePluginSettings.wpieExportData.exportFileType&&"csv"!=wpiePluginSettings.wpieExportData.exportFileType)&&wpiePrepareExportFile(),jQuery(".wpie_export_proccess_title").html(wpiePluginSettings.wpieLocalizeText.wpieExportCompletedText),t=i.exported_records,p=100,clearInterval(wpiePluginSettings.wpieExportData.exportInterval),jQuery(".wpie_export_process_btn_wrapper").show(),jQuery(".wpie_remote_export_wrapper").show(),jQuery(".wpie_export_process_option_btn_wrapper").hide(),jQuery(".progress-bar").css("width","100%").html("100%"),jQuery(".wpie_export_total_records_value").html(t),jQuery(".wpie_export_process .progress-bar").addClass("wpie_completed"),jQuery(".wpie_export_notice").hide()},error:function(e,i){void 0!==wpiePluginSettings.wpieExportData.exportStatus&&"stop"==wpiePluginSettings.wpieExportData.exportStatus||wpieHandleAjaxError(e,i)}});else if("bg"==wpiePluginSettings.wpieExportData.exportStatus)wpie_update_export_status("bg");else if("pause"==wpiePluginSettings.wpieExportData.exportStatus){jQuery(".wpie_export_process_pause_btn").hide(),jQuery(".wpie_export_process_resume_btn").show();var i=setInterval(function(){(!wpiePluginSettings.wpieExportData.exportProcess||wpiePluginSettings.wpieExportData.exportProcess&&4==wpiePluginSettings.wpieExportData.exportProcess.readyState)&&(jQuery(".wpie_process_action").modal("hide"),clearInterval(i))},1e3);clearInterval(wpiePluginSettings.wpieExportData.exportInterval)}else"stop"==wpiePluginSettings.wpieExportData.exportStatus&&setTimeout(function(){jQuery(".wpie_process_action").modal("hide"),jQuery(".wpie_export_popup_wrapper").modal("hide")},2e3)}function wpiePrepareExportFile(){wpieSetProcessLoader({wpiePrepareFile:wpiePluginSettings.wpieLocalizeText.wpiePrepareFile}),jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"GET",data:"action=wpie_export_prepare_file&export_id="+wpiePluginSettings.wpieExportData.wpieExportId,dataType:"json",success:function(e){if(wpieUpdateProcessLoader("wpiePrepareFile"),"error"==e.status)return wpieSetErrorMsg(e.message),!1},error:function(e,i){wpieHandleAjaxError(e,i)}})}function wpie_update_export_status(e){setTimeout(function(){jQuery(".wpie_process_action").modal("hide"),jQuery(".wpie_export_popup_wrapper").modal("hide")},1500),wpieShowLoader(),jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"GET",data:"action=wpie_export_update_status&wpie_export_id="+wpiePluginSettings.wpieExportData.wpieExportId+"&process_status="+e,dataType:"json",success:function(e){if(wpieHideLoader(),"error"==e.status)return wpieSetErrorMsg(e.message),!1;wpieSetSuccessMsg(e.message)},error:function(e,i){wpieHandleAjaxError(e,i)}}),wpieHideLoader()}function wpieGetFieldsData(){var e="";jQuery(".wpie_field_selection .wpie_fields_title").each(function(i,t){var p=jQuery(this).html(),r=(t=decodeURIComponent(jQuery(this).attr("field_data")),decodeURIComponent(jQuery(this).attr("old_field_data")));e+=p+"|~|"+t+"|~|"+r+"~||~"}),jQuery(".wpie_export_fields_data").val(e)}function wpieGetFieldRuleData(){var e="";return void 0!==wpiePluginSettings.wpieExportData.filterRule&&jQuery.each(wpiePluginSettings.wpieExportData.filterRule,function(i,t){var p="";jQuery(".wpie_filter_data_rule_"+i).length&&jQuery(".wpie_filter_data_rule_"+i).find(".wpie_rule_condition_option:checked").length&&(p=jQuery(".wpie_filter_data_rule_"+i).find(".wpie_rule_condition_option:checked").val()),e+=decodeURIComponent(t.fieldRule)+"`|~`"+t.fieldCondition+"`|~`"+t.fieldRuleValue+"`|~`"+p+"~`|`~"}),e.replace(/&/g,"&amp;")}function wpieSetProcessLoader(e){var i="";jQuery.each(e,function(e,t){i+='<div class="wpie_task_wrapper '+e+'" >',i+='<div class="wpie_task_icon_wrapper wpie_task_processing_icon"><i class="fas fa-spinner fa-spin wpie_spinner_btn_icon"></i></div>',i+='<div class="wpie_task_icon_wrapper wpie_task_completed_icon"><i class="fas fa-check-circle wpie_general_btn_icon " aria-hidden="true"></i></div>',i+='<div class="wpie_task_title">'+t+"</div>",i+="</div>"}),jQuery(".wpie_task_list").html(i),jQuery(".wpie_processing_data").modal({backdrop:"static",keyboard:!1,show:!0})}function wpieUpdateProcessLoader(e){if(jQuery("."+e).addClass("task_completed"),!jQuery(".wpie_task_list").find(".wpie_task_wrapper:not(.task_completed)").length){jQuery(".wpie_processing_data").modal("hide");var i=setInterval(function(){jQuery(".wpie_processing_data").hasClass("show")?jQuery(".wpie_processing_data").modal("hide"):clearInterval(i)},1e3)}}jQuery(document).ready(function(e){null==wpiePluginSettings&&(wpiePluginSettings=[]),null==wpiePluginSettings.wpieExportData&&(wpiePluginSettings.wpieExportData=[]),null==wpiePluginSettings.processes&&(wpiePluginSettings.processes=[]),jQuery.isFunction(jQuery.fn.chosen)&&jQuery(".wpie_content_data_select").length&&jQuery(".wpie_content_data_select").chosen({search_contains:!0}),jQuery.isFunction(jQuery.fn.autoComplete)&&jQuery(".wpie_auto_complete").length&&jQuery(".autoComplete").autoComplete({minChars:0,source:function(e,t){e=e.toLowerCase();var p=[["Australia","au"],["Austria","at"],["Brasil","br"],["Bulgaria","bg"],["Canada","ca"],["China","cn"],["Czech Republic","cz"],["Denmark","dk"],["Finland","fi"],["France","fr"],["Germany","de"],["Hungary","hu"],["India","in"],["Italy","it"],["Japan","ja"],["Netherlands","nl"],["Norway","no"],["Portugal","pt"],["Romania","ro"],["Russia","ru"],["Spain","es"],["Swiss","ch"],["Turkey","tr"],["USA","us"]],r=[];for(i=0;i<p.length;i++)~(p[i][0]+" "+p[i][1]).toLowerCase().indexOf(e)&&r.push(p[i]);t(r)}}),wpieSetToolTip(),"1"!==wpiePluginSettings.isUploadDirWritable&&wpieSetStrictErrorMsg(wpiePluginSettings.wpieLocalizeText.uploadDirWritableError)}),jQuery(document).on("click",".wpie_content_data_header",function(){var e=jQuery(this).closest(".wpie_section_wrapper").find(".wpie_section_content");jQuery(this).hasClass("wpie_section_wrapper_selected")?(jQuery(this).removeClass("wpie_section_wrapper_selected"),jQuery(this).hasClass("wpie_field_mapping_section")&&jQuery(this).closest(".wpie_section_wrapper").find(".wpie_field_mapping_fields_wrapper").slideUp()):(jQuery(this).addClass("wpie_section_wrapper_selected"),jQuery(this).hasClass("wpie_field_mapping_section")&&jQuery(this).closest(".wpie_section_wrapper").find(".wpie_field_mapping_fields_wrapper").slideDown()),e.slideToggle("slow")}),jQuery(document).on("change",".wpie_scheduled_send_email_chk",function(){jQuery(this).closest("td").find(".wpie_options_data_send_mail").slideToggle()}),jQuery(document).on("change",".wpie_export_type_select",function(){wpieShowLoader();var e=jQuery(this).val();jQuery(".wpie_update_template_btn_wrapper").hide(),jQuery(".wpie_content_data").attr("class","wpie_content_data wpie_"+e),wpieChangeExport(e)}),jQuery(document).on("change",".wpie_content_data_rule_fields",function(){var e,i=jQuery(this).val(),t=jQuery.parseJSON(decodeURIComponent(i));if(""!=i){var p=!1;void 0!==t.isDate&&1==t.isDate?(e=wpiePluginSettings.wpieExportData.exportRule.wpie_date,p=!0):e=void 0!==t.isTax&&1==t.isTax?wpiePluginSettings.wpieExportData.exportRule.wpie_tax:void 0!==t.isCapability&&1==t.isCapability?wpiePluginSettings.wpieExportData.exportRule.wpie_capabilities:void 0!==t.isUser&&1==t.isUser?wpiePluginSettings.wpieExportData.exportRule.wpie_user:void 0!==t.isTermParent&&1==t.isTermParent?wpiePluginSettings.wpieExportData.exportRule.wpie_term_parent_slug:wpiePluginSettings.wpieExportData.exportRule.default,!0===p?jQuery(".wpie_value_hints_container").show():jQuery(".wpie_value_hints_container").hide();var r="";jQuery.each(e,function(e,i){r+='<option value="'+e+'">'+i+"</option>"}),wpieRefreshExportRuleFilters(r)}}),jQuery(document).on("click",".wpie_save_add_rule_btn",function(){wpieShowLoader(),wpieAddNewExportRule("AND")?(jQuery(".wpie_content_data_rule_fields").val("").trigger("chosen:updated"),jQuery(".wpie_content_data_rule_select").val("").trigger("chosen:updated"),jQuery(".wpie_content_data_rule_value").val(""),wpieAddProecess("wpieExportRecordCount"),wpieExportRecordCount()):wpieHideLoader()}),jQuery(document).on("click",".wpie_content_data_rule_select",function(){var e=jQuery(this).val();"is_empty"==e||"is_not_empty"==e?jQuery(".wpie_content_data_rule_value").hide():jQuery(".wpie_content_data_rule_value").show()}),jQuery(document).on("show.bs.modal",".modal",function(e){var i=1040+10*jQuery(".modal:visible").length;jQuery(this).css("z-index",i),setTimeout(function(){jQuery(".modal-backdrop").not(".modal-stack").css("z-index",i-1).addClass("modal-stack")},0)}),jQuery(document).on("change",".wpie_taxonomies_types_select",function(){wpieShowLoader(),jQuery(".wpie_content_added_data_rule").html(""),wpieAddProecess("wpieSetExportFields"),wpieSetExportFields(),wpieAddProecess("wpieExportRecordCount"),wpieExportRecordCount()}),jQuery(document).on("change",".wpie_attribute_taxonomies_select",function(){wpieShowLoader(),wpieAddProecess("wpieExportRecordCount"),wpieExportRecordCount()}),jQuery(document).on("click",".wpie_rule_trash_btn",function(){wpieShowLoader();var e=jQuery(this).closest(".wpie_filter_data_rule").attr("wpie_rule_data");jQuery(this).closest(".wpie_filter_data_rule").remove(),jQuery(".wpie_filter_data_rule").last().find(".wpie_filter_data_rule_cond_data").html(""),void 0!==wpiePluginSettings.wpieExportData.filterRule[e]&&delete wpiePluginSettings.wpieExportData.filterRule[e],wpieAddProecess("wpieExportRecordCount"),wpieExportRecordCount()}),jQuery(document).on("change",".wpie_rule_condition_option",function(){wpieShowLoader(),wpieAddProecess("wpieExportRecordCount"),wpieExportRecordCount()}),jQuery(document).on("click",".wpie_fields_remove",function(){jQuery(this).closest(".wpie_fields_wrapper").remove()}),jQuery(document).on("click",".wpie_fields_remove_all",function(){jQuery(".wpie_field_selection").html("")}),jQuery(document).on("click",".wpie_fields_add_all",function(){wpieAddAllFields()}),jQuery(document).on("click",".wpie_fields_add_new",function(){if(""==jQuery(".wpie_export_type_select").val())return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTypeText),!1;jQuery(".wpie_export_php_fun_data").val(""),jQuery(".wpie_export_php_fun").prop("checked",!1),jQuery(".wpie_export_php_fun_inner_wrapper").hide(),jQuery(".wpie_field_editor_date_field_wrapper").hide();var e=jQuery(".wpie_content_data_field_list option:first").text(),i=jQuery(".wpie_content_data_field_list option:first").val();jQuery(".wpie_field_editor_data").val(e),jQuery(".wpie_content_data_field_list").val(i).trigger("chosen:updated"),jQuery(".wpie_field_editor_product_option_field").hide(),jQuery(".wpie_field_editor_model").modal("show")}),jQuery(document).on("click",".wpie_add_bulk_fields",function(){if(""===jQuery(".wpie_export_type_select").val())return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTypeText),!1;jQuery(".wpie_bulk_fields").val("").trigger("chosen:updated"),jQuery(".wpie_bulk_fields_model").modal("show")}),jQuery(document).on("click",".wpie_add_bulk_field_btn",function(){var e=jQuery(".wpie_bulk_fields").val();if(""===e||null===e)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieExportEmptyFieldText),!1;var i="";jQuery.each(e,function(e,t){if(""!=t){var p=jQuery.parseJSON(decodeURIComponent(t));i+=wpieGenerateFieldsData(t,t,p.name)}}),jQuery(".wpie_field_selection").append(i),jQuery.isFunction(jQuery.fn.sortable)&&jQuery(".wpie_field_selection").sortable("refresh"),jQuery.isFunction(jQuery.fn.wpie_editable)&&jQuery(".wpie_fields_title:not(.wpie_editable_container)").each(function(){jQuery(this).addClass("wpie_editable_container").wpie_editable("click",function(e){})}),jQuery(".wpie_bulk_fields_model").modal("hide")}),jQuery(document).on("click",".wpie_fields_settings",function(){jQuery(".wpie_export_type_select").val();jQuery(".wpie_fields_title_active").removeClass("wpie_fields_title_active");var e=jQuery(this).closest(".wpie_fields_wrapper");e.addClass("wpie_fields_title_active");var i=e.find(".wpie_fields_title").html(),t=e.find(".wpie_fields_title").attr("old_field_data"),p=e.find(".wpie_fields_title").attr("field_data"),r=jQuery.parseJSON(decodeURIComponent(p));void 0!==r.isPhp&&1==r.isPhp?(jQuery(".wpie_export_php_fun").prop("checked",!0),jQuery(".wpie_export_php_fun_inner_wrapper").show()):(jQuery(".wpie_export_php_fun").prop("checked",!1),jQuery(".wpie_export_php_fun_inner_wrapper").hide()),"undefined"==r.metaKey||"_upsell_ids"!=r.metaKey&&"_crosssell_ids"!=r.metaKey?jQuery(".wpie_field_editor_product_option_field").hide():("undefined"!=r.UpCrossSell?jQuery(".wpie_field_editor_product_options_field").val(r.UpCrossSell).trigger("chosen:updated"):jQuery(".wpie_field_editor_product_options_field").val("sku").trigger("chosen:updated"),jQuery(".wpie_field_editor_product_option_field").show()),void 0!==r.phpFun?jQuery(".wpie_export_php_fun_data").val(r.phpFun):jQuery(".wpie_export_php_fun_data").val(""),"undefined"!=r.isDate&&1==r.isDate?(void 0!==r.dateType?jQuery(".wpie_field_editor_date_field").val(r.dateType).trigger("chosen:updated"):jQuery(".wpie_field_editor_date_field").val("php").trigger("chosen:updated"),void 0!==r.dateFormat?jQuery(".wpie_field_editor_date_field_format").val(r.dateFormat):jQuery(".wpie_field_editor_date_field_format").val(""),jQuery(".wpie_field_editor_date_field_wrapper").show()):jQuery(".wpie_field_editor_date_field_wrapper").hide(),jQuery(".wpie_field_editor_data").val(i),jQuery(".wpie_content_data_field_list").val(t).trigger("chosen:updated"),jQuery(".wpie_field_editor_model").modal("show")}),jQuery(document).on("change",".wpie_export_php_fun",function(){jQuery(".wpie_export_php_fun_inner_wrapper").slideToggle("slow")}),jQuery(document).on("click",".wpie_export_save_field_btn",function(){jQuery(".wpie_export_type_select").val();var e=jQuery(".wpie_field_editor_data").val();if(""==e)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieExportEmptyFieldText),!1;var i=jQuery(".wpie_content_data_field_list").val();if(""!=i){var t=jQuery.parseJSON(decodeURIComponent(jQuery(".wpie_content_data_field_list").val()));jQuery(".wpie_export_php_fun").is(":checked")?t.isPhp=!0:t.isPhp=!1,t.phpFun=jQuery(".wpie_export_php_fun_data").val(),"undefined"!=t.isDate&&1==t.isDate&&(t.dateType=jQuery(".wpie_field_editor_date_field").val(),t.dateFormat=jQuery(".wpie_field_editor_date_field_format").val()),"undefined"!=t.UpCrossSell&&(t.UpCrossSell=jQuery(".wpie_field_editor_product_options_field").val());var p=encodeURIComponent(JSON.stringify(t));if(jQuery(".wpie_fields_title_active").length>0){var r=jQuery(".wpie_fields_title_active");r.find(".wpie_fields_title").html(e),r.find(".wpie_fields_title").attr("field_data",p),r.find(".wpie_fields_title").attr("old_field_data",i)}else{var a=wpieGenerateFieldsData(p,i,e);jQuery(".wpie_field_selection").append(a),jQuery.isFunction(jQuery.fn.sortable)&&jQuery(".wpie_field_selection").sortable("refresh"),jQuery.isFunction(jQuery.fn.wpie_editable)&&jQuery(".wpie_fields_title:not(.wpie_editable_container)").each(function(){jQuery(this).addClass("wpie_editable_container").wpie_editable("click",function(e){})})}}jQuery(".wpie_field_editor_model").modal("hide")}),jQuery(document).on("click",".wpie_save_template_btn",function(){wpieSaveTemplate(0,jQuery(".wpie_export_template_name").val())}),jQuery(document).on("click",".wpie_update_template_btn",function(){var e=jQuery(".wpie_template_list_select").val();if(""===e)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.wpieEmptyTemplate),!1;wpieSaveTemplate(e,"")}),jQuery(document).on("change",".wpie_template_list_select",function(){wpieShowLoader();var e=jQuery(this).val();if(""==e)return wpieHideLoader(),jQuery(".wpie_update_template_btn_wrapper").hide(),!1;jQuery(".wpie_update_template_btn_wrapper").show();var i=jQuery(".wpie_export_type_select").val();if(""===i)return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTypeText),wpieHideLoader(),!1;void 0!==wpiePluginSettings.wpieExportData[i]&&void 0!==wpiePluginSettings.wpieExportData[i].templateData&&void 0!==wpiePluginSettings.wpieExportData[i].templateData[e]?wpieSetExportTemplate(wpiePluginSettings.wpieExportData[i].templateData[e]):jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"GET",data:"action=wpie_export_get_template_data&template_id="+e,dataType:"json",success:function(t){if("error"==t.status)return wpieSetErrorMsg(t.message),wpieHideLoader(),!1;"undefined"!=wpiePluginSettings.wpieExportData[i].templateData&&null!=wpiePluginSettings.wpieExportData[i].templateData||(wpiePluginSettings.wpieExportData[i].templateData=[]),wpiePluginSettings.wpieExportData[i].templateData[e]=t.data,wpieSetExportTemplate(wpiePluginSettings.wpieExportData[i].templateData[e])},error:function(e,i){wpieHandleAjaxError(e,i)}}),wpieHideLoader()}),jQuery(document).on("change",".wpie_content_data_field_list",function(){var e=jQuery(this).find("option:selected").text();jQuery(".wpie_field_editor_data").val(e);var i=jQuery.parseJSON(decodeURIComponent(jQuery(this).val()));"undefined"!=i.isDate&&1==i.isDate?jQuery(".wpie_field_editor_date_field_wrapper").show():jQuery(".wpie_field_editor_date_field_wrapper").hide(),"undefined"==i.metaKey||"_upsell_ids"!=i.metaKey&&"_crosssell_ids"!=i.metaKey?jQuery(".wpie_field_editor_product_option_field").hide():jQuery(".wpie_field_editor_product_option_field").show()}),jQuery(document).on("click",".wpie_migrate_export_data_btn",function(){wpieProcessExport(1)}),jQuery(document).on("click",".wpie_export_data_btn",function(){wpieProcessExport(0)}),jQuery(document).on("click",".wpie_export_preview_btn",function(){if(!wpieValidateExport())return!1;void 0!==wpiePluginSettings.wpieExportData.wpiePreviewTable&&wpiePluginSettings.wpieExportData.wpiePreviewTable.destroy(),jQuery(".wpie_preview").html();var e="<tr>",i={};jQuery(".wpie_field_selection .wpie_fields_title").each(function(t,p){var r=jQuery(this).html();e+='<th class="wpie_preview_header_data wpie_preview'+t+'"></th>',i["wpie_preview"+t]=r});var t="<thead>"+(e+="</tr>")+"</thead><tfoot>"+e+"</tfoot>";jQuery(".wpie_preview").html(t),jQuery.each(i,function(e,i){jQuery("."+e).text(i)}),wpiePreviewData()}),jQuery(document).on("change",".wpie_field_editor_date_field",function(){"php"==jQuery(this).val()?jQuery(".wpie_field_editor_date_field_format_wrapper").show():jQuery(".wpie_field_editor_date_field_format_wrapper").hide()}),jQuery(document).on("click",".wpie_export_process_close_btn",function(){jQuery(".wpie_export_popup_wrapper").modal("hide")}),jQuery(document).on("click",".wpie_export_process_pause_btn",function(){jQuery(".wpie_process_action").modal({backdrop:"static",keyboard:!1,show:!0}),wpiePluginSettings.wpieExportData.exportStatus="pause"}),jQuery(document).on("click",".wpie_export_bg_process_btn",function(){"pause"==wpiePluginSettings.wpieExportData.exportStatus&&wpiePluginSettings.wpieExportData.exportProcess&&4==wpiePluginSettings.wpieExportData.exportProcess.readyState?wpie_update_export_status("bg"):(jQuery(".wpie_process_action").modal({backdrop:"static",keyboard:!1,show:!0}),wpiePluginSettings.wpieExportData.exportStatus="bg")}),jQuery(document).on("click",".wpie_export_process_stop_btn",function(){"pause"==wpiePluginSettings.wpieExportData.exportStatus&&jQuery(".wpie_export_popup_wrapper").modal("hide"),wpiePluginSettings.wpieExportData.exportStatus="stop",jQuery(".wpie_process_action").modal("hide"),jQuery(".wpie_export_popup_wrapper").modal("hide"),wpiePluginSettings.wpieExportData.exportProcess&&4!=wpiePluginSettings.wpieExportData.exportProcess.readyState&&wpiePluginSettings.wpieExportData.exportProcess.abort()}),jQuery(document).on("click",".wpie_export_process_resume_btn",function(){wpiePluginSettings.wpieExportData.exportStatus="export",jQuery(".wpie_export_process_pause_btn").show(),jQuery(".wpie_export_process_resume_btn").hide(),wpiePluginSettings.wpieExportData.exportInterval=setInterval(function(){jQuery(".wpie_export_time_elapsed_value").html(wpieElapsedTimeString(wpiePluginSettings.wpieExportData.exportIntervalSec++))},1e3),wpieExportAllData()}),jQuery(document).on("click",".wpie_export_download_btn",function(){jQuery(".wpie_download_export_id").val(wpiePluginSettings.wpieExportData.wpieExportId),jQuery(".wpie_file_download_action").submit()}),jQuery(document).on("change",".wpie_order_item_sigle_row",function(){jQuery(".wpie_order_item_fill_empty_wrapper").slideToggle()}),jQuery(document).on("change",".wpie_wpml_lang",function(){if(""==jQuery(".wpie_export_type_select").val())return wpieSetErrorMsg(wpiePluginSettings.wpieLocalizeText.selectExportTypeText),!1;wpieShowLoader(),wpieAddProecess("wpieExportRecordCount"),wpieExportRecordCount()}),jQuery(document).on("click",".wpie_save_scheduled_btn",function(){if(!1===wpieValidateExport())return!1;wpieShowLoader();var e=jQuery(".wpie_export_type_select").val();void 0!==wpiePluginSettings.wpieExportData[e]&&null!=wpiePluginSettings.wpieExportData[e]||(wpiePluginSettings.wpieExportData[e]=[]),wpieGetFieldsData();var i=wpieGetFieldRuleData(),t=jQuery(".wpie_export_frm").serialize();jQuery.ajax({url:wpiePluginSettings.wpieAjaxURL,type:"POST",data:"action=wpie_export_save_schedule_data&"+t+"&wpie_filter_rule="+i,dataType:"json",success:function(e){if(wpieHideLoader(),"error"==e.status)return wpieSetErrorMsg(e.message),!1;wpieSetSuccessMsg(e.message)},error:function(e,i){wpieHandleAjaxError(e,i)}})}),jQuery(document).on("change",".wpie_migrate_package",function(){jQuery(this).is(":checked")&&wpieAddAllFields()}),jQuery(document).on("change",".wpie_export_file_type",function(){"xml"===jQuery(this).val()?jQuery(".wpie_skip_empty_nodes_wrapper").show():jQuery(".wpie_skip_empty_nodes_wrapper").hide()});