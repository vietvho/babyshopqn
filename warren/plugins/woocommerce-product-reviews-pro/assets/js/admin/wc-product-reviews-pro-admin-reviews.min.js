"use strict";(function(){jQuery(function(s){var d,r,e,i;if("comment"===window.pagenow||"product_page_reviews"===window.pagenow)return i=null!=(e=window.wc_product_reviews_pro_admin_reviews)?e:{},d=s("#wc-product-reviews-pro-flags"),r=function(a,e,c){e={action:"wc_product_reviews_pro_handle_contribution_flag",security:i.handle_contribution_flag_nonce,handling:a,flags:c,contribution:e};return s.post(i.ajax_url,e,function(e){var t,n,r,i,o;if(e.success){for(o=[],r=0,i=c.length;r<i;r++)n=c[r],t=d.find("#flag-"+n),"delete"===a?t.fadeOut("400",function(){if(s(this).remove(),1===d.find("tbody tr").length)return s("tr.no-flags").show()}):"resolve"===a&&t.find("button.resolve").fadeOut("400",function(){return t.removeClass("unresolved").addClass("resolved"),s(this).remove()}),o.push(s("#wc-product-reviews-pro-stats").find("tr.active-flags td").html(e.data));return o}return console.log(e)})},d.find("button").not(".action").on("click",function(e){if(e.preventDefault(),"delete"!==(e=s(this).data("action"))||confirm(i.i18n.confirm_delete_flag))return r(e,s(this).data("contribution-id"),[s(this).data("flag-id")])}),d.find("button.action").on("click",function(e){var t,n;if(e.preventDefault(),n=s(this).data("contribution-id"),t=s(this).prev("select").val(),0<(e=d.find("input.select-flag-id:checked").map(function(){return s(this).val()}).get()).length&&("delete"!==t||confirm(i.i18n.confirm_delete_flags)))return r(t,n,e),location.reload()}),s("#wc-product-reviews-pro-attachment a.remove-attachment").on("click",function(e){if(e.preventDefault(),confirm(i.i18n.confirm_remove_attachment))return e=s(this).data("comment-id"),s("#wc-product-reviews-pro-attachment .inside .feedback").remove(),s.ajax({type:"POST",url:i.ajax_url,data:{action:"wc_product_reviews_pro_remove_contribution_attachment",security:i.nonce,comment_id:e},success:function(e){return e.data&&e.data.message||s("#wc-product-reviews-pro-attachment .inside").prepend('<p class="feedback" style="color:#AA0000;">'+i.i18n.error_removing_attachment+"</p>"),e.success?s("#wc-product-reviews-pro-attachment .inside").empty().prepend('<p class="feedback">'+e.data.message+"</p>"):s("#wc-product-reviews-pro-attachment .inside").prepend('<p class="feedback" style="color:#AA0000;">'+e.data.message+"</p>")}})})})}).call(void 0);